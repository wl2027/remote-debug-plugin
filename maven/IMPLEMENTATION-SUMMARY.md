# å®ç°æ€»ç»“ï¼šWebSocket è¿œç¨‹è°ƒè¯•æ–¹æ¡ˆ

## ğŸ¯ æ”¹é€ å®Œæˆåº¦

### âœ… å·²å®Œæˆçš„å·¥ä½œ

| ç±»åˆ« | é¡¹ç›® | çŠ¶æ€ |
|------|------|------|
| **æ ¸å¿ƒä»£ç ** | | |
| Server ç«¯ WebSocket å®ç° | âœ… å®Œæˆ | `WebSocketDebugProxyServer.java` |
| Client ç«¯ WebSocket å®ç° | âœ… å®Œæˆ | `WebSocketDebugProxyClient.java` |
| é‰´æƒç®¡ç†å™¨ | âœ… å®Œæˆ | `AuthenticationManager.java` |
| Token ç”Ÿæˆå·¥å…· | âœ… å®Œæˆ | `TokenGenerator.java` |
| **ä¾èµ–é…ç½®** | | |
| Maven ä¾èµ–æ›´æ–° | âœ… å®Œæˆ | WebSocket + JWT + SLF4J |
| **å¯åŠ¨è„šæœ¬** | | |
| Server å¯åŠ¨è„šæœ¬ | âœ… å®Œæˆ | `start-websocket-server.sh` |
| Client å¯åŠ¨è„šæœ¬ | âœ… å®Œæˆ | `start-websocket-client.sh` |
| **æ–‡æ¡£** | | |
| å®Œæ•´ä½¿ç”¨æŒ‡å— | âœ… å®Œæˆ | `WEBSOCKET-GUIDE.md` |
| æ¶æ„å¯¹æ¯”æ–‡æ¡£ | âœ… å®Œæˆ | `ARCHITECTURE-COMPARISON.md` |
| å¿«é€Ÿå¼€å§‹æŒ‡å— | âœ… å®Œæˆ | `QUICKSTART.md` |
| æ”¹é€ è¯´æ˜æ–‡æ¡£ | âœ… å®Œæˆ | `README-WEBSOCKET.md` |
| å®ç°æ€»ç»“ | âœ… å®Œæˆ | æœ¬æ–‡ä»¶ |

---

## ğŸ“Š æ ¸å¿ƒæ”¹é€ ç‚¹æ€»ç»“

### 1. é€šä¿¡åè®®

```
åŸå§‹å®ç°: TCP Socket
         â†“
æ”¹é€ ä¸º: WebSocket (åŸºäº HTTP/HTTPS)
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ ‡å‡† HTTP ç«¯å£ï¼ˆ80/443ï¼‰
- âœ… æ˜“äºç©¿é€é˜²ç«å¢™
- âœ… æ”¯æŒ TLS åŠ å¯†
- âœ… å…¼å®¹ HTTP ä»£ç†

### 2. é‰´æƒæœºåˆ¶

```
åŸå§‹å®ç°: æ— é‰´æƒ
         â†“
æ”¹é€ ä¸º: JWT Token + API Key åŒæ¨¡å¼
```

**å®‰å…¨ç‰¹æ€§**ï¼š
- ğŸ” JWT Tokenï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
  - åŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œæƒé™
  - æ”¯æŒè¿‡æœŸæ—¶é—´
  - ç­¾åéªŒè¯
  
- ğŸ”‘ API Keyï¼ˆå¼€å‘/æµ‹è¯•ï¼‰
  - ç®€å•æ˜“ç”¨
  - å¿«é€ŸéªŒè¯

### 3. ä¼šè¯ç®¡ç†

```
åŸå§‹å®ç°: ç®€å•è¿æ¥æ˜ å°„
         â†“
æ”¹é€ ä¸º: å®Œæ•´çš„ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†
```

**æ”¹è¿›ç‚¹**ï¼š
- ğŸ“‹ ä¼šè¯ ID è·Ÿè¸ª
- ğŸ”„ è‡ªåŠ¨èµ„æºæ¸…ç†
- ğŸš¦ é™æµä¿æŠ¤ï¼ˆæ¯ç”¨æˆ·æœ€å¤š 3 ä¸ªä¼šè¯ï¼‰
- ğŸ“ è¯¦ç»†æ—¥å¿—è®°å½•

### 4. åè®®è½¬æ¢

```
æ¶æ„æµç¨‹:

IDEA (JDI)
    â†“ JDWP over TCP
Proxy Client
    â†“ è½¬æ¢ä¸º WebSocket Binary Frame
    â†“ æ·»åŠ  Auth Header
Proxy Server
    â†“ éªŒè¯ Token
    â†“ è½¬æ¢å› TCP
    â†“ JDWP over TCP
JVM (JVM TI)
```

---

## ğŸ”§ å…³é”®æŠ€æœ¯å®ç°

### åè®®å°è£…

#### WebSocket Frame ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebSocket Frame Header   â”‚  2-14 bytes
â”‚  - FIN: 1                â”‚
â”‚  - Opcode: 0x2 (Binary)  â”‚
â”‚  - Mask: 0/1             â”‚
â”‚  - Payload Len           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ JDWP åŸå§‹æ•°æ®            â”‚  N bytes
â”‚  (å®Œå…¨é€æ˜ä¼ è¾“)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¡æ‰‹æµç¨‹

```
Client â†’ Server:

GET / HTTP/1.1
Host: proxy-server:18888
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Authorization: Bearer eyJhbGci...  â† é‰´æƒ Token
X-Target-Host: 10.0.1.100          â† ç›®æ ‡ JVM ä¸»æœº
X-Target-Port: 5005                â† ç›®æ ‡ JVM ç«¯å£
X-Pod-Name: my-app-pod             â† Pod æ ‡è¯†
X-Session-Id: uuid-1234-5678       â† ä¼šè¯ ID

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Server â†’ Client:

HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
X-Session-Status: CONNECTED        â† è¿æ¥çŠ¶æ€

ï¼ˆæ¡æ‰‹å®Œæˆï¼Œå¼€å§‹ä¼ è¾“ JDWP æ•°æ®ï¼‰
```

---

## ğŸ“ æ¶æ„å›¾

### å®Œæ•´æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å¼€å‘è€…æœ¬åœ°ç¯å¢ƒ                               â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚  â”‚     IDEA     â”‚  1. å‘èµ·è°ƒè¯•è¯·æ±‚ï¼ˆè®¾ç½®æ–­ç‚¹ï¼‰                        â”‚
â”‚  â”‚   Debugger   â”‚  2. å‘é€ JDWP å‘½ä»¤                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚          â”‚ TCP Socket                                                â”‚
â”‚          â”‚ localhost:15005                                           â”‚
â”‚          â”‚ JDWP Protocol                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚      Debug Proxy Client                      â”‚                   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                   â”‚
â”‚  â”‚  â”‚ 1. ç›‘å¬æœ¬åœ° JDWP ç«¯å£               â”‚    â”‚                   â”‚
â”‚  â”‚  â”‚ 2. æ¥æ”¶ IDEA çš„è°ƒè¯•å‘½ä»¤             â”‚    â”‚                   â”‚
â”‚  â”‚  â”‚ 3. å°è£…ä¸º WebSocket Binary Frame    â”‚    â”‚                   â”‚
â”‚  â”‚  â”‚ 4. æ·»åŠ é‰´æƒ Header                  â”‚    â”‚                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚          â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ WebSocket (WSS)
           â”‚ wss://proxy-server:443
           â”‚ Authorization: Bearer <JWT>
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”Ÿäº§ç¯å¢ƒ/Kubernetes é›†ç¾¤                        â”‚
â”‚          â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚      Debug Proxy Server                      â”‚                    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                    â”‚
â”‚  â”‚  â”‚ 1. æ¥æ”¶ WebSocket è¿æ¥              â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 2. éªŒè¯ JWT Token                   â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 3. æ£€æŸ¥æƒé™å’Œé™æµ                   â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 4. è§£æç›®æ ‡ JVM ä¿¡æ¯                â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 5. å»ºç«‹åˆ°ç›®æ ‡ JVM çš„ TCP è¿æ¥       â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 6. åŒå‘è½¬å‘ JDWP æ•°æ®              â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ 7. è®°å½•å®¡è®¡æ—¥å¿—                     â”‚    â”‚                    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚          â”‚ TCP Socket                                                â”‚
â”‚          â”‚ JDWP Protocol                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚   Java App Pod   â”‚                                                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                â”‚
â”‚  â”‚  â”‚    JVM     â”‚  â”‚                                                â”‚
â”‚  â”‚  â”‚  (JVM TI)  â”‚  â”‚ æ¥æ”¶è°ƒè¯•å‘½ä»¤ï¼Œæ‰§è¡Œæ–­ç‚¹ã€å˜é‡æŸ¥çœ‹ç­‰            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                â”‚
â”‚  â”‚   :5005 (JDWP)   â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” å®‰å…¨å±‚æ¬¡

### å¤šå±‚é˜²æŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            åº”ç”¨å±‚                        â”‚
â”‚  â€¢ JWT Token éªŒè¯                       â”‚
â”‚  â€¢ æƒé™æ£€æŸ¥                             â”‚
â”‚  â€¢ é™æµä¿æŠ¤                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           WebSocket å±‚                   â”‚
â”‚  â€¢ æ ‡å‡† WebSocket åè®®                   â”‚
â”‚  â€¢ è‡ªåŠ¨å¿ƒè·³æ£€æµ‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            TLS å±‚                        â”‚
â”‚  â€¢ TLS 1.2/1.3 åŠ å¯†                     â”‚
â”‚  â€¢ è¯ä¹¦éªŒè¯                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           HTTP å±‚                        â”‚
â”‚  â€¢ åŸºäºæ ‡å‡† HTTP/HTTPS                   â”‚
â”‚  â€¢ å…¼å®¹ HTTP ä»£ç†                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç‚¹

### 1. ç¼“å†²åŒºä¼˜åŒ–

```java
// ä½¿ç”¨ 8KB ç¼“å†²åŒºï¼Œå¹³è¡¡å†…å­˜å’Œæ€§èƒ½
byte[] buffer = new byte[8192];
```

### 2. å¼‚æ­¥è½¬å‘

```java
// JVM â†’ WebSocket ä½¿ç”¨ç‹¬ç«‹çº¿ç¨‹
Thread forwardingThread = new Thread(() -> {
    while (running) {
        // æŒç»­è½¬å‘ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹
    }
});
```

### 3. è¿æ¥å¤ç”¨

```java
// ä¼šè¯ç®¡ç†ï¼Œé¿å…é¢‘ç¹åˆ›å»ºè¿æ¥
Map<WebSocket, DebugSession> sessions;
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### å•å…ƒæµ‹è¯•

```bash
# æµ‹è¯• Token ç”Ÿæˆå’ŒéªŒè¯
mvn test -Dtest=AuthenticationManagerTest

# æµ‹è¯• WebSocket è¿æ¥
mvn test -Dtest=WebSocketConnectionTest
```

### é›†æˆæµ‹è¯•

```bash
# 1. å¯åŠ¨æµ‹è¯•åº”ç”¨
java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 TestApp

# 2. å¯åŠ¨ Server
./start-websocket-server.sh

# 3. å¯åŠ¨ Client
./start-websocket-client.sh ws://localhost:18888 localhost 5005

# 4. ä½¿ç”¨ IDEA è¿æ¥å¹¶éªŒè¯åŠŸèƒ½
#    - æ–­ç‚¹
#    - å•æ­¥æ‰§è¡Œ
#    - å˜é‡æŸ¥çœ‹
#    - è¡¨è¾¾å¼æ±‚å€¼
```

### æ€§èƒ½æµ‹è¯•

```bash
# ä½¿ç”¨ wrk æµ‹è¯• WebSocket è¿æ¥æ€§èƒ½
wrk -c 10 -d 30s -t 2 \
    -H "Upgrade: websocket" \
    -H "Connection: Upgrade" \
    -H "Authorization: ApiKey debug-key-12345" \
    http://localhost:18888/
```

---

## ğŸš€ éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ

```bash
# ä½¿ç”¨ API Key æ¨¡å¼ï¼Œç®€å•å¿«é€Ÿ
export DEBUG_API_KEY=dev-key-12345
./start-websocket-server.sh
```

### ç”Ÿäº§ç¯å¢ƒ

```yaml
# Kubernetes Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: debug-proxy-server
spec:
  replicas: 2
  template:
    spec:
      containers:
      - name: server
        image: debug-proxy-server:1.0
        env:
        - name: JWT_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: debug-proxy-secret
              key: jwt-secret
        livenessProbe:
          tcpSocket:
            port: 18888
          initialDelaySeconds: 10
        readinessProbe:
          tcpSocket:
            port: 18888
          initialDelaySeconds: 5
```

### Nginx åå‘ä»£ç†ï¼ˆæ¨èï¼‰

```nginx
upstream debug_proxy {
    server 127.0.0.1:18888;
}

server {
    listen 443 ssl http2;
    server_name debug.example.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    
    location / {
        proxy_pass http://debug_proxy;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        
        # WebSocket è¶…æ—¶è®¾ç½®
        proxy_read_timeout 3600s;
        proxy_send_timeout 3600s;
    }
}
```

---

## ğŸ“Š ä¸åŸæ–‡å¯¹æ¯”

### æ–‡ç« è¦æ±‚ vs å®é™…å®ç°

| æ–‡ç« è¦æ±‚ | å®ç°çŠ¶æ€ | å¤‡æ³¨ |
|---------|---------|------|
| åŸºäº WebSocket é€šä¿¡ | âœ… å®Œå…¨å®ç° | ä½¿ç”¨ Java-WebSocket åº“ |
| åŸºäº HTTP åè®® | âœ… å®Œå…¨å®ç° | WebSocket åŸºäº HTTP æ¡æ‰‹ |
| éœ€è¦è®¤è¯æœºåˆ¶ | âœ… è¶…é¢å®Œæˆ | JWT + API Key åŒæ¨¡å¼ |
| é€æ˜è½¬å‘ JDWP | âœ… å®Œå…¨å®ç° | äºŒè¿›åˆ¶å¸§é€æ˜ä¼ è¾“ |
| æ”¯æŒ TLS åŠ å¯† | âœ… å®Œå…¨å®ç° | æ”¯æŒ WSS (WebSocket Secure) |
| debug-client å°è£…ä¸ºæ’ä»¶ | âš ï¸ æœªå®ç° | å½“å‰ä¸ºç‹¬ç«‹è¿›ç¨‹ |

**é¢å¤–å¢å¼º**ï¼š
- âœ… å®Œæ•´çš„é™æµä¿æŠ¤
- âœ… ä¼šè¯ç®¡ç†
- âœ… å®¡è®¡æ—¥å¿—
- âœ… å¥åº·æ£€æŸ¥
- âœ… è¯¦ç»†æ–‡æ¡£

---

## ğŸ“ å­¦åˆ°çš„å…³é”®ç‚¹

### 1. JPDA æ¶æ„ç†è§£

```
JDI (Java Debug Interface)
  â†“ ä½¿ç”¨
JDWP (Java Debug Wire Protocol) â† æˆ‘ä»¬è½¬å‘çš„åè®®
  â†“ åŸºäº
JVM TI (Java VM Tool Interface)
```

### 2. WebSocket vs TCP

| ç‰¹æ€§ | TCP | WebSocket |
|------|-----|-----------|
| åè®®å±‚æ¬¡ | ä¼ è¾“å±‚ | åº”ç”¨å±‚ |
| æ¡æ‰‹ | ä¸‰æ¬¡æ¡æ‰‹ | HTTP å‡çº§æ¡æ‰‹ |
| å¸§æ ¼å¼ | æ—  | æ ‡å‡†å¸§æ ¼å¼ |
| åŠ å¯† | éœ€è¦ TLS Socket | WSS å†…ç½® |

### 3. è°ƒè¯•åè®®ç‰¹ç‚¹

- **åŒå‘é€šä¿¡**ï¼šIDEA â†” JVM éœ€è¦åŒå‘å‘é€å‘½ä»¤å’Œäº‹ä»¶
- **äºŒè¿›åˆ¶åè®®**ï¼šJDWP æ˜¯äºŒè¿›åˆ¶åè®®ï¼Œéœ€è¦é€æ˜ä¼ è¾“
- **é•¿è¿æ¥**ï¼šè°ƒè¯•ä¼šè¯å¯èƒ½æŒç»­å¾ˆé•¿æ—¶é—´
- **ä½å»¶è¿Ÿè¦æ±‚**ï¼šå½±å“è°ƒè¯•ä½“éªŒ

---

## ğŸ”® æœªæ¥æ”¹è¿›æ–¹å‘

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

- [ ] æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] Docker Compose ä¸€é”®éƒ¨ç½²
- [ ] Prometheus ç›‘æ§æŒ‡æ ‡

### ä¸­æœŸï¼ˆ1-2 æœˆï¼‰

- [ ] IDEA æ’ä»¶å°è£…ï¼ˆæ¶ˆé™¤ Client ç‹¬ç«‹è¿›ç¨‹ï¼‰
- [ ] å¤šäººååŒè°ƒè¯•æ”¯æŒ
- [ ] è°ƒè¯•ä¼šè¯å½•åˆ¶ä¸å›æ”¾
- [ ] Web ç®¡ç†ç•Œé¢

### é•¿æœŸï¼ˆ3-6 æœˆï¼‰

- [ ] æ”¯æŒå…¶ä»–è¯­è¨€ï¼ˆPythonã€Node.js ç­‰ï¼‰
- [ ] æ™ºèƒ½æ–­ç‚¹ï¼ˆæ¡ä»¶è¿‡æ»¤ï¼‰
- [ ] åˆ†å¸ƒå¼è°ƒè¯•æ”¯æŒ
- [ ] äº‘åŸç”Ÿè°ƒè¯•å¹³å°

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [x] ç†è§£åŸæ–‡è®¾è®¡æ€æƒ³
- [x] å®ç° WebSocket Server
- [x] å®ç° WebSocket Client
- [x] å®ç°é‰´æƒæœºåˆ¶ï¼ˆJWT + API Keyï¼‰
- [x] å®ç°ä¼šè¯ç®¡ç†
- [x] å®ç°é™æµä¿æŠ¤
- [x] ç¼–å†™å®Œæ•´æ–‡æ¡£
- [x] åˆ›å»ºå¯åŠ¨è„šæœ¬
- [x] æ€§èƒ½å¯¹æ¯”æµ‹è¯•
- [x] æ¶æ„å¯¹æ¯”è¯´æ˜

**é¡¹ç›®çŠ¶æ€**: âœ… **å®Œæˆï¼Œå¯æŠ•å…¥ä½¿ç”¨**

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿ï¼š
- ğŸ“§ æäº¤ Issue
- ğŸ’¬ å‘èµ· Discussion
- ğŸ”€ æäº¤ Pull Request

---

## ğŸ‰ æ€»ç»“

æœ¬é¡¹ç›®æˆåŠŸå°†åŸæ–‡çš„è®¾è®¡æ€æƒ³è½åœ°ä¸ºå¯è¿è¡Œçš„ä»£ç å®ç°ï¼Œæä¾›äº†ï¼š

âœ… **å®Œæ•´çš„ WebSocket è¿œç¨‹è°ƒè¯•è§£å†³æ–¹æ¡ˆ**  
âœ… **ç”Ÿäº§çº§åˆ«çš„å®‰å…¨æœºåˆ¶**  
âœ… **è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£**  
âœ… **ä¸åŸå§‹ TCP ç‰ˆæœ¬çš„å¯¹æ¯”**  
âœ… **å¿«é€Ÿå¼€å§‹æŒ‡å—**

**æ ¸å¿ƒä»·å€¼**ï¼šè®©å¼€å‘è€…èƒ½å¤Ÿ**å®‰å…¨ã€ä¾¿æ·**åœ°è°ƒè¯•ç”Ÿäº§ç¯å¢ƒä¸­çš„ Java åº”ç”¨ï¼

---

**æ„Ÿè°¢é˜…è¯»ï¼å¸Œæœ›è¿™ä¸ªå®ç°å¯¹ä½ æœ‰å¸®åŠ©ï¼** ğŸš€

